//

import type { AppEnv_Context } from "#src/config";
import { button } from "#src/ui/button";
import { urls } from "#src/urls";
import { useRequestContext } from "hono/jsx-renderer";

//

export function NotAuthorized() {
  const {
    var: { nonce },
  } = useRequestContext<AppEnv_Context>();

  return (
    <main class="flex h-full grow flex-col items-center justify-center">
      <div class="mx-auto max-w-7xl px-4">
        <div class="flex flex-wrap items-center justify-center gap-8">
          <div class="w-full md:w-1/2">
            <h1 class="text-3xl font-bold">Accès Non Autorisé</h1>
            <p class="text-xl">
              Le service{" "}
              <span class="break-words">
                H
                {Array.from({ length: Math.max(3, nonce.length) })
                  .fill("y")
                  .join("") + "pertool"}
              </span>{" "}
              est en accès restreint. Seuls les utilisateurs autorisés peuvent y
              accéder.
            </p>
            <p class="text-sm">
              Si vous pensez qu'il s'agit d'une erreur, merci de contacter votre
              administrateur.
            </p>
            <a
              class={button({ type: "tertiary" })}
              href={urls.auth.logout.$url().pathname}
            >
              Retour
            </a>
          </div>
          <div class="w-full md:w-1/4">
            <Infographic />
          </div>
        </div>
      </div>
    </main>
  );
}

function Infographic() {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xml:space="preserve"
      viewBox="0 0 282 320"
    >
      <g fill="none" fill-rule="evenodd">
        <path
          fill="#E3E3FD"
          d="M36.2053962 315.1c1.2179 0 2.2053.985 2.2053 2.2 0 1.215-.9874 2.2-2.2053 2.2-1.218 0-2.2054-.985-2.2054-2.2 0-1.215.9874-2.2 2.2054-2.2Zm16.1726 0c1.218 0 2.2053.985 2.2053 2.2 0 1.215-.9873 2.2-2.2053 2.2s-2.2054-.985-2.2054-2.2c0-1.215.9874-2.2 2.2054-2.2Zm16.1726 0c1.218 0 2.2054.985 2.2054 2.2 0 1.215-.9874 2.2-2.2054 2.2s-2.2054-.985-2.2054-2.2c0-1.215.9874-2.2 2.2054-2.2Zm16.1726 0c1.218 0 2.2054.985 2.2054 2.2 0 1.215-.9874 2.2-2.2054 2.2s-2.2053-.985-2.2053-2.2c0-1.215.9873-2.2 2.2053-2.2Zm16.1727998 0c1.218 0 2.205.985 2.205 2.2 0 1.215-.987 2.2-2.205 2.2-1.2181998 0-2.2054998-.985-2.2054998-2.2 0-1.215.9873-2.2 2.2054998-2.2Zm16.172 0c1.218 0 2.206.985 2.206 2.2 0 1.215-.988 2.2-2.206 2.2s-2.205-.985-2.205-2.2c0-1.215.987-2.2 2.205-2.2Zm16.173 0c1.218 0 2.205.985 2.205 2.2 0 1.215-.987 2.2-2.205 2.2s-2.205-.985-2.205-2.2c0-1.215.987-2.2 2.205-2.2Zm16.173 0c1.218 0 2.205.985 2.205 2.2 0 1.215-.987 2.2-2.205 2.2s-2.206-.985-2.206-2.2c0-1.215.988-2.2 2.206-2.2Zm16.172 0c1.218 0 2.206.985 2.206 2.2 0 1.215-.988 2.2-2.206 2.2s-2.205-.985-2.205-2.2c0-1.215.987-2.2 2.205-2.2Z"
        />
        <path
          fill="#E3E3FD"
          d="M227.940996 59.6506c28.228 11.8838 48.093 40.1951 52.902 69.7294 4.809 29.535-5.646 60.293-26.346 82.138-20.701 21.845-51.648 34.952-83.431 43.69-31.992 8.913-64.821 13.457-89.9125998 4.195-25.0919-9.263-42.4471-32.506-57.5022-56.099-15.05516999-23.418-27.81021999-47.185-22.37363999-67.458 5.64567-20.272 29.27383999-36.8741 53.11113999-49.2821 23.8374-12.4081 47.4652998-20.7966 77.7852998-27.2628 30.319-6.6409 67.33-11.3595 95.767.3495Z"
        />
        <path
          fill="#6A6AF4"
          d="M166.036996 158.982c.62-1.24 2.328-1.305 3.063-.196l.113.196 21.3 42.6c.559 1.118-.182 2.423-1.384 2.557l-.204.011h-7.1c-.98 0-1.775-.794-1.775-1.775 0-.91.685-1.66 1.568-1.763l.207-.012h4.226l-18.426-36.856-18.428 36.856h25.528c.91 0 1.661.686 1.763 1.568l.012.207c0 .911-.685 1.661-1.568 1.764l-.207.011h-28.4c-1.25 0-2.086-1.246-1.669-2.38l.081-.188 21.3-42.6Z"
        />
        <path
          fill="#6A6AF4"
          d="M167.624996 175.75c.98 0 1.775.795 1.775 1.775v10.65c0 .981-.795 1.775-1.775 1.775-.98 0-1.775-.794-1.775-1.775v-10.65c0-.98.795-1.775 1.775-1.775Zm1.775 19.525c0-.98-.795-1.775-1.775-1.775-.98 0-1.775.795-1.775 1.775 0 .981.795 1.775 1.775 1.775.98 0 1.775-.794 1.775-1.775Z"
        />
        <path
          fill="#000091"
          d="M190.687996 120.519c-.102-.883-.853-1.568-1.763-1.568H93.0749962l-.207.012c-.8828.102-1.568.852-1.568 1.763v81.65l.0119.207c.1026.882.8528 1.568 1.7631 1.568h42.5999998l.207-.012c.883-.103 1.568-.853 1.568-1.763l-.012-.207c-.102-.883-.853-1.568-1.763-1.568H94.8499962v-63.9h65.6749998l.207-.012c.883-.103 1.568-.853 1.568-1.763 0-.981-.795-1.775-1.775-1.775H94.8499962v-10.65h92.2999998v10.65h-15.975l-.207.012c-.883.102-1.568.852-1.568 1.763 0 .98.795 1.775 1.775 1.775h15.975v44.375l.012.207c.102.882.853 1.568 1.763 1.568.98 0 1.775-.795 1.775-1.775v-60.35l-.012-.207Z"
        />
        <path
          fill="#000091"
          d="M100.174996 129.601c-.9786998 0-1.7749998-.797-1.7749998-1.775 0-.979.7963-1.775 1.7749998-1.775.979 0 1.775.796 1.775 1.775 0 .978-.796 1.775-1.775 1.775Zm5.325-1.775c0 .978.796 1.775 1.775 1.775.979 0 1.775-.797 1.775-1.775 0-.979-.796-1.775-1.775-1.775-.979 0-1.775.796-1.775 1.775Zm8.875 1.775c-.979 0-1.775-.797-1.775-1.775 0-.979.796-1.775 1.775-1.775.979 0 1.775.796 1.775 1.775 0 .978-.796 1.775-1.775 1.775Zm67.45-3.55c.98 0 1.775.794 1.775 1.775 0 .91-.685 1.66-1.568 1.763l-.207.012h-53.25c-.98 0-1.775-.795-1.775-1.775 0-.911.685-1.661 1.568-1.763l.207-.012h53.25Zm-30.175 23.075c0-.981-.795-1.775-1.775-1.775h-42.6l-.207.012c-.883.102-1.568.852-1.568 1.763 0 .98.795 1.775 1.775 1.775h42.6l.207-.012c.883-.103 1.568-.853 1.568-1.763Zm-8.875 8.875c.98 0 1.775.794 1.775 1.775 0 .91-.685 1.66-1.568 1.763l-.207.012h-35.5c-.98 0-1.775-.795-1.775-1.775 0-.911.685-1.661 1.568-1.763l.207-.012h35.5Zm-8.875 12.425c0-.981-.795-1.775-1.775-1.775h-24.85l-.207.012c-.883.102-1.568.852-1.568 1.763 0 .98.795 1.775 1.775 1.775h24.85l.207-.012c.883-.103 1.568-.853 1.568-1.763Z"
        />
      </g>
    </svg>
  );
}
